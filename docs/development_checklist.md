# Streamlit×Causal Impact データ分析アプリ開発計画（チェックリスト）

本チェックリストは、Causal Impact分析アプリの開発を効率的に進めるための進捗管理用です。

---

## 1. 環境構築・動作確認
- [x] Python仮想環境（venv）を作成
- [x] requirements.txtによるパッケージインストール
- [x] Causal Impact分析の単体動作確認（サンプルデータで）
- [x] Streamlitの起動・動作確認
- [x] docsフォルダに環境・注意事項ドキュメントを集約
  - ※ここまで完了！

## 2. STEP 1：データ取り込み／可視化
- [x] サンプルCSVデータの準備（処置群・対照群）
- [x] StreamlitでCSVアップロードUIを実装
- [x] データ形式ガイド・サンプル表示
- [x] データファイル選択UI（処置群・対照群）
- [x] データ読み込み・プレビュー（テーブル・統計情報）
- [x] データセット結合・整形処理の実装
- [x] 折れ線グラフ等による時系列可視化
- [x] 「データセット作成」ボタンの実装
- [x] STEP1完了時のみSTEP2以降を順次展開
  - ※STEP1ここまで完了！

## 3. STEP 2：分析期間／パラメータ設定
- [x] 介入前期間・介入期間の入力UI実装（カレンダー等）
- [x] モデルパラメータ設定UI実装（信頼区間、季節性、周期タイプ等）
- [x] 入力値のバリデーション・確認表示
- [x] 「分析設定を保存」「STEP3に進む」ボタンの実装
  - ※STEP2 UI実装完了！

## 4. STEP 3：分析実行／結果確認
- [x] 分析処理用Pythonスクリプト（単体テスト用）の実装（causal_impact_test.py）
- [x] 分析実行ボタンのUI実装 
- [x] 分析結果タブ表示のUI実装（サマリー／詳細／グラフ／ダウンロード）
- [x] app.py内での基本的な分析機能の実装（STEP1&2のデータとパラメータを使用した分析の実行と結果表示）
- [x] Matplotlib/Plotlyによる基本的な分析結果表示機能の実装
- [x] 分析結果サマリーの日本語表示機能の実装
- [x] 詳細レポートの日本語化処理の実装
- [ ] Streamlitと親和性の高いライブラリを用いた分析結果表示UIの改善
  - [ ] 分析結果のグラフ表示をStreamlitのデザインに統一（Plotlyによる実装）
  - [ ] インタラクティブな要素の追加（期間選択、ズーム機能など）
  - [ ] サマリー表示の視覚的改善（カラーコーディング、アイコン表示など）
- [ ] 外部分析スクリプト（analyze.py）の作成
  - [ ] app.py内の分析処理部分を抽出して外部スクリプト化
  - [ ] Streamlitからのパラメータ受け取り機能の実装
  - [ ] 分析結果の適切な形式での返却機能の実装（JSON形式など）
- [ ] Streamlitから外部スクリプト呼び出し連携の実装（app.py→analyze.py）
  - [ ] サブプロセス実行またはAPI連携による呼び出し方法の実装
  - [ ] エラーハンドリング・タイムアウト処理の実装
- [ ] 分析結果のダウンロード機能実装
  - [ ] サマリーテキストのダウンロード機能
  - [ ] グラフ画像のダウンロード機能
  - [ ] 分析データセットのCSVダウンロード機能

### 【次のアクション（優先順位順）】
1. 分析結果表示UIのUI/UX改善
   - Plotlyを活用して、インタラクティブなグラフ表示を実装
   - グラフのレイアウト・配色をStreamlitのデザインに合わせて調整
   - サマリー表示にカラーコーディングやアイコンを追加して視認性を向上

2. 外部分析スクリプト（analyze.py）の作成
   - app.py内の分析処理部分を抽出し、独立した関数として実装
   - JSON形式でパラメータを受け取り、結果を返却する仕組みを構築
   - 複数の分析パターンに対応できる柔軟な設計

3. app.pyとanalyze.pyの連携実装
   - サブプロセス実行またはAPI連携による連携方法の実装
   - パラメータの受け渡しと結果の受け取り処理の実装
   - エラーハンドリングの実装

4. 分析結果のダウンロード機能の実装
   - 様々な形式（CSV、PNG、PDF）でのダウンロード機能実装
   - ファイル名・保存場所のカスタマイズオプション

## 5. 統合・テスト・改善
- [ ] 全体の統合テスト
- [ ] 想定外データ・エラーケースのテスト
- [ ] UI/UXの改善（フィードバック反映）
- [ ] ドキュメント・READMEの整備
- [ ] docsフォルダに全ドキュメント集約

---

## 備考
- チェックリストは進捗に応じて随時更新・活用してください。
- 各STEPの成果物・サンプルデータ・ドキュメントは必ずdocsフォルダに集約してください。 