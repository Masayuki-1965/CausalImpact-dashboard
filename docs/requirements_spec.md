<!--
【役割】
本ファイルは、Causal Impact分析アプリの全体要件・機能仕様・画面仕様・技術要件をまとめた要件定義書です。
【参照先】
- docs/development_checklist.md（進捗管理・TODOリスト）
- docs/current_status.md（開発状況）
- docs/environment_notes.md（Python環境・ライブラリ構成）
- docs/streamlit_dashboard_structure.md（画面・構成仕様）
-->
# Causal Impact データ分析アプリ 要件定義書

## 1. 概要

本アプリケーションは、マーケティングや広告施策の効果測定に特化した「Causal Impact」分析を、専門知識がなくても直感的に実行できるデータ分析ダッシュボードです。  
StreamlitによるUI/UXと、Pythonスクリプトによる高品質な因果推論分析をハイブリッド構成で提供します。

---

## 2. システム全体構成

- **UI/UX**：Streamlit（サイドバー＋メインコンテンツの2カラム構成）
- **分析処理**：外部Pythonスクリプト（例：analyze.py）でCausal Impact分析を実行
- **データ管理**：CSVファイル（処置群・対照群）を`data/`配下で管理
- **ドキュメント**：`docs/`フォルダに全て集約

---

## 3. 画面・機能要件

### 3.1 サイドバー

- 分析フロー（STEP1～STEP3）の進捗表示・ナビゲーション
- FAQ/ガイド（「Causal Impactとは？」「処置群と対照群について」等）

### 3.2 メインコンテンツ

#### STEP 1：データ取り込み／可視化

- データ形式ガイド（CSV要件・サンプル表示）
- データファイル選択UI（処置群・対照群）
- データ読み込み・プレビュー（テーブル・統計情報）
- 時系列プロット（処置群・対照群の推移）
- 「データセット作成」ボタン
- ※STEP1完了時のみSTEP2以降を順次展開

#### STEP 2：分析期間／モデルパラメータ設定

- 介入前期間・介入期間の設定（カレンダーUI等）
- モデルパラメータ設定（信頼区間、季節性、周期タイプ、事前分布の標準偏差など）
- 設定内容の確認表示
- 「分析設定を保存」「STEP3に進む」ボタン

#### STEP 3：分析実行／結果確認

- 分析実行ボタン（外部スクリプト呼び出し）
- 分析結果のタブ表示
    - サマリー（summary）
    - 詳細レポート（report）
    - 予測・実測プロット
    - データダウンロード
- 分析未実行時の注意喚起

---

## 4. 画面遷移・操作フロー

1. **STEP1**：データ形式ガイド → ファイル選択 → データ読み込み → プレビュー・可視化 → データセット作成
2. **STEP2**：分析期間・パラメータ設定 → 設定内容確認 → 設定保存
3. **STEP3**：分析実行 → タブで結果確認（サマリー／詳細／グラフ／ダウンロード）

---

## 5. 技術的要件・制約

- Streamlit UIと分析処理（Causal Impact）は分離
- 分析パラメータ・データは外部スクリプトに渡して実行
- 分析結果はStreamlit側でタブ表示・可視化
- すべてのドキュメント・サンプルデータは`docs/`フォルダに集約

---

## 6. 補足・ガイド

- データ形式や操作方法のガイドを随所に配置
- 分析未経験者でも直感的に操作できる設計
- UI/UX改善はフィードバックをもとに随時実施

--- 