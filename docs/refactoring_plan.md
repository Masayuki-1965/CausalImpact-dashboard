# Causal Impact分析アプリ リファクタリング計画

## 基本方針
- コア機能（集計ロジック、UI/UX、画面レイアウト、ユーザー操作フロー）は一切変更しない（ブラックボックス化）
- 構造・可読性・保守性の向上のみを目的とする
- 変更範囲を最小限にし、安定性を最優先
- 実データ（treatment_data/control_data）で必ず動作確認

## 段階的実施計画

### ステップ1：ファイル構成・命名整理
- モジュール分離（例：データ入出力、エラーハンドリング、ユーティリティ関数を分割）
- ファイル・クラス・関数名の明確化（英語/日本語の統一）

### ステップ2：処理の整理
- ファイル読み込み・保存処理の共通化
- エラーハンドリングの一元化
- ログ出力や例外処理の整理

### ステップ3：ディレクトリ構成の見直し
- `scripts/`や`utils/`等のサブディレクトリ導入（必要に応じて）

### ステップ4：段階的テスト
- 各リファクタリング単位ごとに**実データ（treatment_data/control_data）で動作確認**
- 変更範囲を最小限にし、安定性を最優先

### ステップ5：ドキュメント更新
- 変更点・新構成を`README.md`や`docs/`内に反映

## 「小さな単位」について
- 本計画における「小さな単位」とは、**STEP単位（STEP1/STEP2/STEP3）または機能単位（データ入出力、エラー処理、ユーティリティ等）**での進行を指します。
- 1つのSTEPまたは機能ごとにリファクタリング→動作確認→安定化、というサイクルで進めます。

## 備考
- コア機能・UI/UX・集計ロジックはブラックボックスとして扱い、絶対に変更しません。
- 安定して動作している部分は極力触らず、安全かつ計画的に構造を整理・改善します。 